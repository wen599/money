(function(){"use strict";var t={2138:function(t,e,a){var n=a(9242),s=a(3396);function i(t,e,a,n,i,o){const r=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(r)}var o={name:"App"},r=a(89);const l=(0,r.Z)(o,[["render",i],["__scopeId","data-v-b4c08762"]]);var c=l,d=a(5431);(0,d.z)("/money/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var u=a(678);function g(t,e,a,n,i,o){const r=(0,s.up)("Tags"),l=(0,s.up)("Comment"),c=(0,s.up)("BillType"),d=(0,s.up)("NumberPanel"),u=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(u,{class:"money"},{"layout-slot":(0,s.w5)((()=>[(0,s.Wm)(r),(0,s.Wm)(l),(0,s.Wm)(c),(0,s.Wm)(d)])),_:1})}var m=a(7139);const p={class:"tagsContainer"},h=["tagid"];function v(t,e,a,n,i,o){return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("ul",{onClick:e[0]||(e[0]=t=>o.selectTag(t)),ref:"ulRef"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tags,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,tagid:t.id},(0,m.zw)(t.tagName),9,h)))),128))],512),(0,s._)("p",{onClick:e[1]||(e[1]=(...t)=>o.newTag&&o.newTag(...t))},"新增标签")])}var f={name:"Tags",data(){return{tags:this.$store.state.tags}},computed:{selectTags(){return this.$store.state.obj.selectTags}},methods:{selectTag(t){t.target!==this.$refs.ulRef&&(t.target.classList.toggle("active"),this.$store.commit("updateSelectTags",t.target.getAttribute("tagid")))},newTag(){this.$router.push("/newtag")}},mounted(){const t=this.$refs.ulRef.children;for(let e=0;e<t.length;e++)-1!==this.selectTags.indexOf(t[e].getAttribute("tagid"))&&(t[e].className="active")}};const b=(0,r.Z)(f,[["render",v],["__scopeId","data-v-6b37a937"]]);var y=b;function _(t,e,a,n,i,o){return(0,s.wg)(),(0,s.iD)("div",{class:"billTypeContainer",onClick:e[0]||(e[0]=(...t)=>o.switchType&&o.switchType(...t))},[(0,s._)("div",{class:(0,m.C_)("支出"===i.billName?"active":""),ref:"outlayRef"},"支出",2),(0,s._)("div",{ref:"earningRef",class:(0,m.C_)("收入"===i.billName?"active":"")},"收入",2)])}var w={name:"BillType",data(){return{billName:this.$store.state.obj.billType}},methods:{switchType(t){this.$refs.outlayRef.className="",this.$refs.earningRef.className="",t.target.className="active",this.$store.commit("updateBillType",t.target.innerHTML)}}};const T=(0,r.Z)(w,[["render",_],["__scopeId","data-v-03463dc6"]]);var j=T;const N=t=>((0,s.dD)("data-v-5692e942"),t=t(),(0,s.Cn)(),t),k={class:"commentContainer"},D=N((()=>(0,s._)("span",null,"备注",-1)));function C(t,e,a,i,o,r){return(0,s.wg)(),(0,s.iD)("div",k,[D,(0,s.wy)((0,s._)("input",{placeholder:"在这里添加备注","onUpdate:modelValue":e[0]||(e[0]=t=>this.$store.state.obj.comment=t)},null,512),[[n.nr,this.$store.state.obj.comment]])])}var $={name:"Comment"};const I=(0,r.Z)($,[["render",C],["__scopeId","data-v-5692e942"]]);var O=I;const R={class:"numberPanelContainer"},Z=(0,s.uE)("<li data-v-ac28ec9c>1</li><li data-v-ac28ec9c>2</li><li data-v-ac28ec9c>3</li><li data-v-ac28ec9c>删除</li><li data-v-ac28ec9c>4</li><li data-v-ac28ec9c>5</li><li data-v-ac28ec9c>6</li><li data-v-ac28ec9c>清空</li><li data-v-ac28ec9c>7</li><li data-v-ac28ec9c>8</li><li data-v-ac28ec9c>9</li><li data-v-ac28ec9c>ok</li><li data-v-ac28ec9c>0</li><li data-v-ac28ec9c>.</li>",14),x=[Z];function S(t,e,a,n,i,o){return(0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("p",null,(0,m.zw)(t.obj.money),1),(0,s._)("ul",{onClick:e[0]||(e[0]=(...t)=>o.input&&o.input(...t))},x)])}var L=a(65),M={data(){return{content:this.$store.state.obj.money}},computed:(0,L.rn)(["obj"]),name:"NumberPanel",methods:{input(t){const e=t.target.innerHTML;if("清空"===e)this.obj.money="0";else if("删除"===e)this.obj.money=this.obj.money.length>1?this.obj.money.substring(0,this.obj.money.length-1):"0";else if("."===e){if(-1!==this.obj.money.indexOf("."))return;this.obj.money+="."}else"ok"===e?"0"!==this.obj.money&&(this.$store.commit("addCostRecords"),this.$router.go(0)):"0"===this.obj.money&&1===this.obj.money.length?this.obj.money=e:this.obj.money+=e}}};const W=(0,r.Z)(M,[["render",S],["__scopeId","data-v-ac28ec9c"]]);var z=W,H={name:"Money",components:{NumberPanel:z,Comment:O,BillType:j,Tags:y}};const A=(0,r.Z)(H,[["render",g],["__scopeId","data-v-3b406810"]]);var B=A;const U=["data-id"],Y=["data-id"],P=["data-id"];function F(t,e,a,n,i,o){const r=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(r,{class:"labels"},{"layout-slot":(0,s.w5)((()=>[(0,s._)("ul",{onClick:e[0]||(e[0]=(...t)=>o.editTag&&o.editTag(...t))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.tags,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,"data-id":t.id},[(0,s._)("p",{"data-id":t.id},(0,m.zw)(t.tagName),9,Y),(0,s._)("i",{class:"iconfont icon-jinrujiantou","data-id":t.id},null,8,P)],8,U)))),128))]),(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>o.newTag&&o.newTag(...t))},"新建标签")])),_:1})}var K={name:"Labels",computed:(0,L.rn)(["tags"]),methods:{newTag(){this.$router.push("/newtag")},editTag(t){this.$router.push(`/edittags/${t.target.dataset.id}`)}}};const E=(0,r.Z)(K,[["render",F],["__scopeId","data-v-23df3f20"]]);var V=E;const q=t=>((0,s.dD)("data-v-12f3841c"),t=t(),(0,s.Cn)(),t),J=q((()=>(0,s._)("div",{class:"head"},"统计",-1))),G={class:"time"},Q={class:"comment"},X={class:"money"};function tt(t,e,a,n,i,o){const r=(0,s.up)("Layout");return(0,s.wg)(),(0,s.j4)(r,{class:"statistics"},{"layout-slot":(0,s.w5)((()=>[J,(0,s._)("div",{class:"billtype",onClick:e[0]||(e[0]=(...t)=>o.switchType&&o.switchType(...t))},[(0,s._)("div",{class:(0,m.C_)("支出"===i.billtype?"active":"")},"支出",2),(0,s._)("div",{class:(0,m.C_)("收入"===i.billtype?"active":"")},"收入",2)]),(0,s._)("div",{class:"lable",onClick:e[1]||(e[1]=(...t)=>o.switchLableType&&o.switchLableType(...t))},[(0,s._)("p",{class:(0,m.C_)("按天"===i.lableType?"active":"")},"按天",2),(0,s._)("p",{class:(0,m.C_)("按周"===i.lableType?"active":"")},"按周",2),(0,s._)("p",{class:(0,m.C_)("按月"===i.lableType?"active":"")},"按月",2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.costRecords,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.time},[(0,s._)("div",G,[(0,s._)("p",null,(0,m.zw)(t.time),1),(0,s._)("p",null,(0,m.zw)("¥"+t.sum),1)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.jilu,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"particular",key:e},[(0,s._)("p",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.selectTags,(t=>((0,s.wg)(),(0,s.iD)("span",{key:t,class:"tag"},(0,m.zw)(o.tags[t]+" "),1)))),128))]),(0,s._)("p",Q,(0,m.zw)(t.comment),1),(0,s._)("p",X,(0,m.zw)("¥"+t.money),1)])))),128))])))),128))])),_:1})}const et={paddingZero(t){return t>=10?t:"0"+t},getDate(t){const e=t||new Date;return`${e.getFullYear()}-${this.paddingZero(e.getMonth()+1)}-${this.paddingZero(e.getDate())} ${this.paddingZero(e.getHours())}:${this.paddingZero(e.getMinutes())}:${this.paddingZero(e.getSeconds())}`},init(){return localStorage.getItem("小文记账")?JSON.parse(localStorage.getItem("小文记账")):{tags:[{id:1,tagName:"衣"},{id:2,tagName:"食"},{id:3,tagName:"住"},{id:4,tagName:"行"}],tagNextId:5,costRecords:[]}},getWeek(t){const e="1970-1-5 00:00:00",a=6048e5;return Math.ceil((Date.parse(t)-Date.parse(e))/a)},getStartDate(t){const e=6048e5,a="1970-1-5 00:00:00",n=new Date((t-1)*e+Date.parse(a)),s=new Date(t*e+Date.parse(a)-864e5);return et.getDate(n).toString().substring(0,10)+"~"+et.getDate(s).toString().substring(0,10)}};var at=et,nt={data(){return{billtype:"支出",lableType:"按天"}},computed:{costRecords(){const t=this.$store.state.costRecords.filter((t=>t.billType===this.billtype));let e=[];const a=[];if("按天"===this.lableType||"按月"===this.lableType){for(let a=0;a<t.length;a++)e.push(t[a].time.substr(0,"按月"===this.lableType?7:10));e=Array.from(new Set(e)).reverse();for(let n=0;n<e.length;n++){const s={time:e[n]};s.jilu=t.filter((t=>-1!==t.time.indexOf(e[n]))),s.sum=0;for(let t=0;t<s.jilu.length;t++)s.sum+=parseInt(s.jilu[t].money);a.push(s)}}if("按周"===this.lableType){for(let a=0;a<t.length;a++)e.push(at.getWeek(t[a].time));e=Array.from(new Set(e)).reverse(),console.log(e);for(let n=0;n<e.length;n++){const s={time:at.getStartDate(e[n])};s.jilu=t.filter((t=>at.getWeek(t.time)===e[n])),s.sum=0;for(let t=0;t<s.jilu.length;t++)s.sum+=parseInt(s.jilu[t].money);a.push(s)}}return a},tags(){const t=this.$store.state.tags,e={};for(let a=0;a<t.length;a++)e[t[a].id]=t[a].tagName;return e}},name:"Statistics",methods:{switchType(t){this.billtype=t.target.innerHTML},switchLableType(t){this.lableType=t.target.innerHTML}}};const st=(0,r.Z)(nt,[["render",tt],["__scopeId","data-v-12f3841c"]]);var it=st;const ot=(0,s._)("h2",null,"404,网址找不到",-1),rt=(0,s.Uk)("返回首页");function lt(t,e,a,n,i,o){const r=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.iD)("div",null,[ot,(0,s.Wm)(r,{to:"/money"},{default:(0,s.w5)((()=>[rt])),_:1})])}var ct={name:"NotFound"};const dt=(0,r.Z)(ct,[["render",lt]]);var ut=dt;const gt=t=>((0,s.dD)("data-v-376dc239"),t=t(),(0,s.Cn)(),t),mt={class:"edittags"},pt={class:"head"},ht=gt((()=>(0,s._)("p",null,"编辑标签",-1))),vt=(0,s.Uk)(" 标签名");function ft(t,e,a,i,o,r){return(0,s.wg)(),(0,s.iD)("div",mt,[(0,s._)("div",pt,[(0,s._)("i",{class:"iconfont icon-xiangzuojiantou",onClick:e[0]||(e[0]=e=>t.$router.back())}),ht]),(0,s._)("label",null,[vt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.tagName=t),onBlur:e[2]||(e[2]=(...t)=>r.updataTagName&&r.updataTagName(...t))},null,544),[[n.nr,o.tagName]])]),(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>r.deleteTag&&r.deleteTag(...t))},"删除标签")])}var bt={name:"EditTags",data(){return{id:parseInt(this.$route.params.id),tagName:""}},methods:{updataTagName(){this.$store.commit("updataTag",{id:this.id,name:this.tagName})},deleteTag(){this.$store.commit("deleteTag",this.id),this.$router.back()}},created(){const t=this.$store.state.tags;for(let e=0;e<t.length;e++)t[e].id===this.id&&(this.tagName=t[e].tagName)}};const yt=(0,r.Z)(bt,[["render",ft],["__scopeId","data-v-376dc239"]]);var _t=yt;const wt=t=>((0,s.dD)("data-v-327e29a9"),t=t(),(0,s.Cn)(),t),Tt={class:"edittags"},jt={class:"head"},Nt=wt((()=>(0,s._)("p",null,"新建标签",-1))),kt=(0,s.Uk)(" 标签名");function Dt(t,e,a,i,o,r){return(0,s.wg)(),(0,s.iD)("div",Tt,[(0,s._)("div",jt,[(0,s._)("i",{class:"iconfont icon-xiangzuojiantou",onClick:e[0]||(e[0]=e=>t.$router.back())}),Nt]),(0,s._)("label",null,[kt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.tagName=t)},null,512),[[n.nr,o.tagName]])]),(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>r.saveTag&&r.saveTag(...t))},"保存标签")])}var Ct={name:"NewTags",data(){return{tagName:""}},methods:{saveTag(){""!==this.tagName.trim()&&(this.$store.commit("createTag",this.tagName.trim()),this.tagName="",this.$router.back())}}};const $t=(0,r.Z)(Ct,[["render",Dt],["__scopeId","data-v-327e29a9"]]);var It=$t;const Ot=(0,u.p7)({history:(0,u.r5)(),routes:[{path:"/",redirect:"/Money"},{path:"/money",component:B},{path:"/labels",component:V},{path:"/statistics",component:it},{path:"/edittags/:id",component:_t},{path:"/newtag",component:It},{path:"/:pathMatch(.*)*",component:ut}]});var Rt=Ot,Zt=(0,L.MT)({state:{tags:at.init().tags,tagNextId:at.init().tagNextId,costRecords:at.init().costRecords,obj:{selectTags:[],comment:"",billType:"支出",money:"0",time:void 0}},getters:{},mutations:{createTag(t,e){for(let a=0;a<t.tags.length;a++)if(t.tags[a].tagName===e)return;t.tags.push({id:t.tagNextId,tagName:e}),t.tagNextId++,this.commit("save")},deleteTag(t,e){t.tags=t.tags.filter((t=>t.id!==e)),this.commit("save")},updataTag(t,e){for(let a=0;a<this.state.tags.length;a++)this.state.tags[a].id===e.id&&this.state.tags[a].tagName!==e.name&&(this.state.tags[a].tagName=e.name,this.commit("save"))},save(){const t={tags:this.state.tags,tagNextId:this.state.tagNextId,costRecords:this.state.costRecords};localStorage.setItem("小文记账",JSON.stringify(t)),this.commit("resetObj")},resetObj(){this.state.obj={selectTags:[],comment:"",billType:"支出",money:"0",time:void 0}},addCostRecords(t){t.obj.time=at.getDate(),t.costRecords.push(t.obj),this.commit("save")},updateSelectTags(t,e){const a=t.obj.selectTags.indexOf(e);-1!==a?t.obj.selectTags.splice(a,1):t.obj.selectTags.push(e)},updateBillType(t,e){t.obj.billType!==e&&(t.obj.billType=e)},updateMoney(t,e){t.obj.money=e}},actions:{},modules:{}});const xt=t=>((0,s.dD)("data-v-21796efc"),t=t(),(0,s.Cn)(),t),St=xt((()=>(0,s._)("i",{class:"iconfont icon-icon-jizhang"},null,-1))),Lt=xt((()=>(0,s._)("p",null,"记账",-1))),Mt=xt((()=>(0,s._)("i",{class:"iconfont icon-biaoqian"},null,-1))),Wt=xt((()=>(0,s._)("p",null,"标签",-1))),zt=xt((()=>(0,s._)("i",{class:"iconfont icon-tongji"},null,-1))),Ht=xt((()=>(0,s._)("p",null,"统计",-1)));function At(t,e,a,n,i,o){const r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r,{to:"/money"},{default:(0,s.w5)((()=>[St,Lt])),_:1}),(0,s.Wm)(r,{to:"/labels"},{default:(0,s.w5)((()=>[Mt,Wt])),_:1}),(0,s.Wm)(r,{to:"/statistics"},{default:(0,s.w5)((()=>[zt,Ht])),_:1})],64)}var Bt={name:"Nav"};const Ut=(0,r.Z)(Bt,[["render",At],["__scopeId","data-v-21796efc"]]);var Yt=Ut;const Pt={class:"container"},Ft={class:"content"},Kt=(0,s.Uk)("默认内容"),Et={class:"nav"};function Vt(t,e,a,n,i,o){const r=(0,s.up)("Nav");return(0,s.wg)(),(0,s.iD)("div",Pt,[(0,s._)("div",Ft,[(0,s.WI)(t.$slots,"layout-slot",{},(()=>[Kt]),!0)]),(0,s._)("div",Et,[(0,s.Wm)(r)])])}var qt={name:"Layout"};const Jt=(0,r.Z)(qt,[["render",Vt],["__scopeId","data-v-7c5b44be"]]);var Gt=Jt;(0,n.ri)(c).use(Zt).use(Rt).component("Layout",Gt).component("Nav",Yt).mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,i){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],i=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,o=n[0],r=n[1],l=n[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(e&&e(n);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},n=self["webpackChunktally"]=self["webpackChunktally"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(2138)}));n=a.O(n)})();
//# sourceMappingURL=app.038155b1.js.map